# ãƒ•ã‚¡ã‚¤ãƒ«å: .github/workflows/deploy.yml

name: Deploy Vite Project to GitHub Pages # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å

on:
  push:
    branches:
      - main # mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã§å®Ÿè¡Œ
  workflow_dispatch:

# ğŸš€ è¿½è¨˜ç®‡æ‰€ 1: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã«æ¨©é™ã‚’ä»˜ä¸ ğŸš€
permissions:
  contents: read
  pages: write # Pagesã¸ã®æ›¸ãè¾¼ã¿æ¨©é™
  id-token: write

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout # ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: Setup Node.js # Node.jsç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-node@v4
        with:
          node-version: '20' # ä½¿ç”¨ã™ã‚‹Nodeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š

      - name: Install dependencies # ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (npm install)
        run: npm install

      - name: Build project # Viteãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œ
        run: npm run build

      - name: Deploy to GitHub Pages # GitHub Pagesã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
        uses: peaceiris/actions-gh-pages@v3
        with:
          # ğŸš€ è¿½è¨˜ç®‡æ‰€ 2: ãƒˆãƒ¼ã‚¯ãƒ³ã®æ˜ç¤º (æ—¢ã«è¨˜è¼‰æ¸ˆã¿ã§ã™ãŒã€ãã®ã¾ã¾ç¶­æŒ) ğŸš€
          github_token: ${{ secrets.GITHUB_TOKEN }} 
          publish_dir: ./dist # ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã®ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š (dist)
          cname: '' # ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ç”¨ã—ãªã„å ´åˆ